"use strict";(self["webpackChunkspringboot_vue_view"]=self["webpackChunkspringboot_vue_view"]||[]).push([[748],{4636:function(e,o,r){r.d(o,{Z:function(){return n}});var t=r(3396),a=r(7139);function s(e,o,r,s,d,l){return(0,t.wg)(),(0,t.iD)("div",{class:"ValidCode disabled-select",style:(0,a.j5)(`width:${r.width}; height:${r.height}`),onClick:o[0]||(o[0]=(...e)=>l.refreshCode&&l.refreshCode(...e))},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(d.codeList,((e,o)=>((0,t.wg)(),(0,t.iD)("span",{key:o,style:(0,a.j5)(l.getStyle(e))},(0,a.zw)(e.code),5)))),128))],4)}r(7658);var d={name:"ValidCode",model:{prop:"value",event:"input"},props:{width:{type:String,default:"100px"},height:{type:String,default:"40px"},length:{type:Number,default:4},refresh:{type:Number}},data(){return{codeList:[]}},watch:{refresh(){this.createdCode()}},mounted(){this.createdCode()},methods:{refreshCode(){this.createdCode()},createdCode(){const e=this.length,o=[],r="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",t=r.length;for(let a=0;a<e;a++){const e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];o.push({code:r.charAt(Math.floor(Math.random()*t)),color:`rgb(${e})`,fontSize:+[Math.floor(10*Math.random())]+6+10+"px",padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=o,console.log(o.map((e=>e.code)).join("")),this.$emit("input",o.map((e=>e.code)).join(""))},getStyle(e){return`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`}}},l=r(89);const i=(0,l.Z)(d,[["render",s],["__scopeId","data-v-e175a8ac"]]);var n=i},3748:function(e,o,r){r.r(o),r.d(o,{default:function(){return c}});r(7658);var t=r(3396);const a={class:"layout"},s={style:{display:"flex"}},d={style:{display:"flex"}};function l(e,o,r,l,i,n){const m=(0,t.up)("el-input"),u=(0,t.up)("el-form-item"),p=(0,t.up)("ValidCode"),h=(0,t.up)("el-button"),f=(0,t.up)("el-form"),c=(0,t.up)("el-tab-pane"),g=(0,t.up)("el-tabs");return(0,t.wg)(),(0,t.iD)("div",a,[(0,t.Wm)(g,{type:"border-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{label:"注册"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{ref:"from",model:i.form,"label-position":"right","label-width":"100px",style:{"max-width":"460px"},class:"loginForm",rules:i.rules,"hide-required-asterisk":!0},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{label:"用户名：",prop:"username","prefix-icon":l.Avatar},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:i.form.username,"onUpdate:modelValue":o[0]||(o[0]=e=>i.form.username=e)},null,8,["modelValue"])])),_:1},8,["prefix-icon"]),(0,t.Wm)(u,{label:"密码：",prop:"password","prefix-icon":l.Lock},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{type:"password",modelValue:i.form.password,"onUpdate:modelValue":o[1]||(o[1]=e=>i.form.password=e),"show-password":""},null,8,["modelValue"])])),_:1},8,["prefix-icon"]),(0,t.Wm)(u,{label:"确认密码：",prop:"password","prefix-icon":l.Lock},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{type:"password",modelValue:i.form.confirm,"onUpdate:modelValue":o[2]||(o[2]=e=>i.form.confirm=e),"show-password":""},null,8,["modelValue"])])),_:1},8,["prefix-icon"]),(0,t.Wm)(u,{label:"验证码："},{default:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t.Wm)(m,{modelValue:i.form.validCode,"onUpdate:modelValue":o[3]||(o[3]=e=>i.form.validCode=e),style:{width:"50%"},placeholder:"请输入验证码："},null,8,["modelValue"]),(0,t.Wm)(p,{onInput:n.createValidcode},null,8,["onInput"])])])),_:1}),(0,t._)("div",d,[(0,t.Wm)(h,{type:"primary",style:{width:"50%"},onClick:n.register},{default:(0,t.w5)((()=>[(0,t.Uk)("注册")])),_:1},8,["onClick"]),(0,t.Wm)(h,{type:"primary",style:{width:"50%"},onClick:o[4]||(o[4]=e=>this.$router.push("/login"))},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1})])])),_:1},8,["model","rules"])])),_:1})])),_:1})])}var i=r(60),n=r(4636),m=r(2748),u=r(1120),p={name:"Register",components:{ValidCode:n.Z},data(){return{form:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},validCode:""}},setup(){return{Avatar:m.Avatar,Lock:m.Lock}},methods:{createValidcode(e){this.validCode=e},register(){this.$refs.from.validate((e=>{e?this.form.validCode?this.form.validCode.toLowerCase()===this.validCode.toLowerCase()?(this.form.role="普通用户",this.$refs.from.validate((e=>{e?i.Z.post("/user/register",this.form).then((e=>{console.log(e),this.form.password==this.form.confirm?"0"==e.code?(this.$message({type:"success",message:"注册成功"}),u.Z.push("/login")):(this.$message({type:"error",message:"注册失败"}),this.form={}):this.$message({type:"error",message:"两次输入的密码不相同！"})})):this.$message({type:"error",message:"请输入用户名和密码!"})}))):this.$message.error("验证码错误！"):this.$message.error("请输入验证码!"):this.$message({type:"error",message:"请输入用户名和密码!"})}))}}},h=r(89);const f=(0,h.Z)(p,[["render",l],["__scopeId","data-v-66e0ee76"]]);var c=f}}]);
//# sourceMappingURL=748.070313b2.js.map