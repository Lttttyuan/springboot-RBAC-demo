"use strict";(self["webpackChunkspringboot_vue_view"]=self["webpackChunkspringboot_vue_view"]||[]).push([[406],{1406:function(e,r,t){t.r(r),t.d(r,{default:function(){return _}});var o=t(3396);const a={class:"layout"},s={style:{display:"flex"}},i={style:{"margin-left":"120px"}},l={style:{display:"flex"}};function n(e,r,t,n,d,m){const u=(0,o.up)("el-input"),p=(0,o.up)("el-form-item"),c=(0,o.up)("ValidCode"),f=(0,o.up)("el-form"),h=(0,o.up)("el-button"),g=(0,o.up)("el-tab-pane"),w=(0,o.up)("el-tabs");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(w,{type:"border-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"登录"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{ref:"from",model:d.form,"label-position":"right","label-width":"85px",style:{"max-width":"460px"},rules:d.rules,"hide-required-asterisk":!0},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"用户名：",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{"prefix-icon":n.Avatar,modelValue:d.form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>d.form.username=e)},null,8,["prefix-icon","modelValue"])])),_:1}),(0,o.Wm)(p,{label:"密码：",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{"prefix-icon":n.Lock,type:"password",modelValue:d.form.password,"onUpdate:modelValue":r[1]||(r[1]=e=>d.form.password=e),"show-password":""},null,8,["prefix-icon","modelValue"])])),_:1}),(0,o.Wm)(p,{label:"验证码："},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o.Wm)(u,{modelValue:d.form.validCode,"onUpdate:modelValue":r[2]||(r[2]=e=>d.form.validCode=e),style:{width:"50%"},placeholder:"请输入验证码："},null,8,["modelValue"]),(0,o.Wm)(c,{onInput:m.createValidcode},null,8,["onInput"])])])),_:1})])),_:1},8,["model","rules"]),(0,o._)("div",i,[(0,o.Wm)(h,{type:"primary",style:{width:"60%"},onClick:m.login},{default:(0,o.w5)((()=>[(0,o.Uk)("登录")])),_:1},8,["onClick"])])])),_:1}),(0,o.Wm)(g,{label:"注册"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{ref:"from",model:d.form,"label-position":"right","label-width":"100px",style:{"max-width":"460px"},class:"loginForm",rules:d.rules,"hide-required-asterisk":!0},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"用户名：",prop:"username","prefix-icon":n.Avatar},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:d.form.username,"onUpdate:modelValue":r[3]||(r[3]=e=>d.form.username=e)},null,8,["modelValue"])])),_:1},8,["prefix-icon"]),(0,o.Wm)(p,{label:"密码：",prop:"password","prefix-icon":n.Lock},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"password",modelValue:d.form.password,"onUpdate:modelValue":r[4]||(r[4]=e=>d.form.password=e)},null,8,["modelValue"])])),_:1},8,["prefix-icon"]),(0,o.Wm)(p,{label:"确认密码：",prop:"password","prefix-icon":n.Lock},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"password",modelValue:d.form.confirm,"onUpdate:modelValue":r[5]||(r[5]=e=>d.form.confirm=e)},null,8,["modelValue"])])),_:1},8,["prefix-icon"]),(0,o._)("div",l,[(0,o.Wm)(h,{type:"primary",style:{width:"50%"},onClick:m.register},{default:(0,o.w5)((()=>[(0,o.Uk)("注册")])),_:1},8,["onClick"]),(0,o.Wm)(h,{type:"primary",style:{width:"50%"},onClick:r[6]||(r[6]=e=>this.$router.go(0))},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1})])])),_:1},8,["model","rules"])])),_:1})])),_:1})])}t(7658);var d=t(2748),m=t(60),u=t(1120);
/*! js-cookie v3.0.5 | MIT */
function p(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)e[o]=t[o]}return e}var c={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function f(e,r){function t(t,o,a){if("undefined"!==typeof document){a=p({},r,a),"number"===typeof a.expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var i in a)a[i]&&(s+="; "+i,!0!==a[i]&&(s+="="+a[i].split(";")[0]));return document.cookie=t+"="+e.write(o,t)+s}}function o(r){if("undefined"!==typeof document&&(!arguments.length||r)){for(var t=document.cookie?document.cookie.split("; "):[],o={},a=0;a<t.length;a++){var s=t[a].split("="),i=s.slice(1).join("=");try{var l=decodeURIComponent(s[0]);if(o[l]=e.read(i,l),r===l)break}catch(n){}}return r?o[r]:o}}return Object.create({set:t,get:o,remove:function(e,r){t(e,"",p({},r,{expires:-1}))},withAttributes:function(e){return f(this.converter,p({},this.attributes,e))},withConverter:function(e){return f(p({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}})}var h=f(c,{path:"/"}),g=t(7139);function w(e,r,t,a,s,i){return(0,o.wg)(),(0,o.iD)("div",{class:"ValidCode disabled-select",style:(0,g.j5)(`width:${t.width}; height:${t.height}`),onClick:r[0]||(r[0]=(...e)=>i.refreshCode&&i.refreshCode(...e))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.codeList,((e,r)=>((0,o.wg)(),(0,o.iD)("span",{key:r,style:(0,g.j5)(i.getStyle(e))},(0,g.zw)(e.code),5)))),128))],4)}var v={name:"ValidCode",model:{prop:"value",event:"input"},props:{width:{type:String,default:"100px"},height:{type:String,default:"40px"},length:{type:Number,default:4},refresh:{type:Number}},data(){return{codeList:[]}},watch:{refresh(){this.createdCode()}},mounted(){this.createdCode()},methods:{refreshCode(){this.createdCode()},createdCode(){const e=this.length,r=[],t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",o=t.length;for(let a=0;a<e;a++){const e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];r.push({code:t.charAt(Math.floor(Math.random()*o)),color:`rgb(${e})`,fontSize:+[Math.floor(10*Math.random())]+6+10+"px",padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=r,console.log(r.map((e=>e.code)).join("")),this.$emit("input",r.map((e=>e.code)).join(""))},getStyle(e){return`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`}}},y=t(89);const C=(0,y.Z)(v,[["render",w],["__scopeId","data-v-e175a8ac"]]);var b=C,x={name:"Login",components:{ValidCode:b},data(){return{form:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},validCode:""}},setup(){return{Avatar:d.Avatar,Lock:d.Lock}},created(){sessionStorage.removeItem("userInfo")},methods:{createValidcode(e){this.validCode=e},login(){this.$refs.from.validate((e=>{e?this.form.validCode?this.form.validCode.toLowerCase()===this.validCode.toLowerCase()?m.Z.post("/user/login",this.form).then((e=>{console.log(e),"0"==e.code?(this.$message({type:"success",message:"登录成功"}),h.set("username",this.form.username),sessionStorage.setItem("userInfo",JSON.stringify(e.data)),u.Z.push("/user")):this.$message({type:"error",message:e.msg})})):this.$message.error("验证码错误！"):this.$message.error("请输入验证码!"):this.$message({type:"error",message:"请输入用户名和密码!"})}))},register(){this.$refs.from.validate((e=>{e?m.Z.post("/user/register",this.form).then((e=>{console.log(e),this.form.password==this.form.confirm?"0"==e.code?(this.$message({type:"success",message:"注册成功"}),this.$router.go(0)):(this.$message({type:"error",message:e.msg}),this.form={}):this.$message({type:"error",message:"两次输入的密码不相同！"})})):this.$message({type:"error",message:"请输入用户名和密码!"})}))}}};const k=(0,y.Z)(x,[["render",n],["__scopeId","data-v-70e43a54"]]);var _=k}}]);
//# sourceMappingURL=406.f65d1605.js.map