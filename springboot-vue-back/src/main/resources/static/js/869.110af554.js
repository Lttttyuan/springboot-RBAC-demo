"use strict";(self["webpackChunkspringboot_vue_view"]=self["webpackChunkspringboot_vue_view"]||[]).push([[869,644],{4636:function(e,t,o){o.d(t,{Z:function(){return d}});var r=o(3396),a=o(7139);function s(e,t,o,s,n,l){return(0,r.wg)(),(0,r.iD)("div",{class:"ValidCode disabled-select",style:(0,a.j5)(`width:${o.width}; height:${o.height}`),onClick:t[0]||(t[0]=(...e)=>l.refreshCode&&l.refreshCode(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.codeList,((e,t)=>((0,r.wg)(),(0,r.iD)("span",{key:t,style:(0,a.j5)(l.getStyle(e))},(0,a.zw)(e.code),5)))),128))],4)}o(7658);var n={name:"ValidCode",model:{prop:"value",event:"input"},props:{width:{type:String,default:"100px"},height:{type:String,default:"40px"},length:{type:Number,default:4},refresh:{type:Number}},data(){return{codeList:[]}},watch:{refresh(){this.createdCode()}},mounted(){this.createdCode()},methods:{refreshCode(){this.createdCode()},createdCode(){const e=this.length,t=[],o="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",r=o.length;for(let a=0;a<e;a++){const e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];t.push({code:o.charAt(Math.floor(Math.random()*r)),color:`rgb(${e})`,fontSize:+[Math.floor(10*Math.random())]+6+10+"px",padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=t,console.log(t.map((e=>e.code)).join("")),this.$emit("input",t.map((e=>e.code)).join(""))},getStyle(e){return`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`}}},l=o(89);const i=(0,l.Z)(n,[["render",s],["__scopeId","data-v-e175a8ac"]]);var d=i},1644:function(e,t,o){o.r(t),o.d(t,{default:function(){return b}});var r=o(3396);const a={style:{display:"flex"}};function s(e,t,o,s,n,l){const i=(0,r.up)("Header"),d=(0,r.up)("Aside"),u=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i),(0,r._)("div",a,[(0,r.Wm)(d),(0,r.Wm)(u,{style:{flex:"1"}})])])}o(7658);var n=o(7139);const l={style:{height:"50px","line-height":"50px","border-bottom":"1px solid #ccc",display:"flex"}},i=(0,r._)("div",{style:{flex:"1"}},null,-1),d={style:{width:"100px"}},u={class:"el-dropdown-link",style:{"margin-top":"15px",outline:"none"}};function m(e,t,o,a,s,m){const p=(0,r.up)("arrow-down"),c=(0,r.up)("el-icon"),h=(0,r.up)("el-dropdown-item"),f=(0,r.up)("el-dropdown-menu"),g=(0,r.up)("el-dropdown");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",{style:{width:"200px","padding-left":"30px","font-weight":"bold",color:"deepskyblue"},onClick:t[0]||(t[0]=t=>e.$router.push("/user"))},"后台管理"),i,(0,r._)("div",d,[(0,r.Wm)(g,null,{dropdown:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,{onClick:m.exit},{default:(0,r.w5)((()=>[(0,r.Uk)("退出系统")])),_:1},8,["onClick"])])),_:1})])),default:(0,r.w5)((()=>[(0,r._)("span",u,[(0,r.Uk)((0,n.zw)(s.username),1),(0,r.Wm)(c,{class:"el-icon--right"},{default:(0,r.w5)((()=>[(0,r.Wm)(p)])),_:1})])])),_:1})])])}var p=o(1120),c={name:"Header",data(){return{username:JSON.parse(sessionStorage.getItem("userInfo")).username}},methods:{exit(){p.Z.push("/login"),sessionStorage.removeItem("userInfo")}}},h=o(89);const f=(0,h.Z)(c,[["render",m]]);var g=f;function w(e,t,o,a,s,l){const i=(0,r.up)("el-icon"),d=(0,r.up)("el-menu-item"),u=(0,r.up)("el-menu");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,{style:{"min-height":"calc(100vh - 50px)"},"default-active":this.$route.path,router:"",class:"el-menu-vertical-demo"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.user.permissions,(e=>((0,r.wg)(),(0,r.j4)(d,{index:e.permissionPath,key:e.pid},{title:(0,r.w5)((()=>[(0,r.Wm)(i,{size:20},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.icon)))])),_:2},1024),(0,r._)("span",null,(0,n.zw)(e.permissionComment),1)])),_:2},1032,["index"])))),128))])),_:1},8,["default-active"])])}o(60);var v={name:"Aside",data(){return{user:{}}},created(){let e=sessionStorage.getItem("userInfo")||"{}";this.user=JSON.parse(e)}};const y=(0,h.Z)(v,[["render",w]]);var x=y,C={name:"Layout",components:{Header:g,Aside:x}};const _=(0,h.Z)(C,[["render",s]]);var b=_},2280:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});o(7658);var r=o(3396),a=o(9242);const s={style:{display:"flex"}},n={style:{"margin-left":"60px",display:"flex"}};function l(e,t,o,l,i,d){const u=(0,r.up)("el-input"),m=(0,r.up)("el-form-item"),p=(0,r.up)("ValidCode"),c=(0,r.up)("el-form"),h=(0,r.up)("el-button"),f=(0,r.up)("el-tab-pane"),g=(0,r.up)("el-tabs");return(0,r.wg)(),(0,r.iD)("div",{class:"logincontent",onTouchmove:t[4]||(t[4]=(0,a.iM)((()=>{}),["prevent"])),onMousewheel:t[5]||(t[5]=(0,a.iM)((()=>{}),["prevent"]))},[(0,r.Wm)(g,{type:"border-card"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{label:"登录"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{ref:"from",model:i.form,"label-position":"right","label-width":"85px",style:{"max-width":"460px"},class:"loginForm",rules:i.rules,"hide-required-asterisk":!0},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{label:"用户名：",prop:"username"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{"prefix-icon":l.Avatar,modelValue:i.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.username=e)},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(m,{label:"密码：",prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{"prefix-icon":l.Lock,type:"password",modelValue:i.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.password=e),"show-password":""},null,8,["prefix-icon","modelValue"])])),_:1}),(0,r.Wm)(m,{label:"验证码："},{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r.Wm)(u,{modelValue:i.form.validCode,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.validCode=e),style:{width:"50%"},placeholder:"请输入验证码："},null,8,["modelValue"]),(0,r.Wm)(p,{onInput:d.createValidcode},null,8,["onInput"])])])),_:1})])),_:1},8,["model","rules"]),(0,r._)("div",n,[(0,r.Wm)(h,{type:"primary",style:{width:"40%"},onClick:d.login},{default:(0,r.w5)((()=>[(0,r.Uk)("登录")])),_:1},8,["onClick"]),(0,r.Wm)(h,{type:"primary",style:{width:"40%"},onClick:t[3]||(t[3]=e=>this.$router.push("/register"))},{default:(0,r.w5)((()=>[(0,r.Uk)("前往注册")])),_:1})])])),_:1})])),_:1})],32)}var i=o(2748),d=o(60),u=o(1120),m=o(4636),p=o(1644);function c(e){let t={path:"/",name:"Layout",component:p["default"],redirect:"/login",children:[]};e.forEach((e=>{let r={path:e.permissionPath,name:e.permissionName,component:()=>o(6968)("./"+e.permissionName)};t.children.push(r)})),u.Z&&u.Z.addRoute(t)}var h={name:"Login",components:{ValidCode:m.Z},data(){return{form:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},validCode:""}},setup(){return{Avatar:i.Avatar,Lock:i.Lock}},created(){sessionStorage.removeItem("userInfo")},methods:{createValidcode(e){this.validCode=e},login(){this.$refs.from.validate((e=>{e?this.form.validCode?this.form.validCode.toLowerCase()===this.validCode.toLowerCase()?d.Z.post("/user/login",this.form).then((e=>{if(console.log(e),"0"==e.code){this.$message({type:"success",message:"登录成功"}),sessionStorage.setItem("userInfo",JSON.stringify(e.data));const t=e.data.permissions;c(t),console.log(u.Z.getRoutes()),u.Z.push("/home")}else this.$message({type:"error",message:e.msg})})):this.$message.error("验证码错误！"):this.$message.error("请输入验证码!"):this.$message({type:"error",message:"请输入用户名和密码!"})}))}}},f=o(89);const g=(0,f.Z)(h,[["render",l],["__scopeId","data-v-e5a06454"]]);var w=g}}]);
//# sourceMappingURL=869.110af554.js.map