"use strict";(self["webpackChunkspringboot_vue_view"]=self["webpackChunkspringboot_vue_view"]||[]).push([[373],{2373:function(e,l,a){a.r(l),a.d(l,{default:function(){return g}});var o=a(3396);const t={style:{padding:"10px"}},s={style:{margin:"10px 0"}},i={style:{margin:"10px 0",width:"20%",display:"flex"}},r={class:"demo-pagination-block",style:{margin:"8px 0"}},d={class:"dialog-footer"};function m(e,l,a,m,n,u){const h=(0,o.up)("el-button"),p=(0,o.up)("el-input"),g=(0,o.up)("el-table-column"),f=(0,o.up)("el-popconfirm"),c=(0,o.up)("el-table"),b=(0,o.up)("el-pagination"),w=(0,o.up)("el-form-item"),W=(0,o.up)("el-radio"),V=(0,o.up)("el-radio-group"),k=(0,o.up)("el-checkbox"),y=(0,o.up)("el-checkbox-group"),_=(0,o.up)("el-form"),U=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",t,[(0,o._)("div",s,[(0,o.Wm)(h,{type:"primary",onClick:u.add},{default:(0,o.w5)((()=>[(0,o.Uk)("新增")])),_:1},8,["onClick"])]),(0,o._)("div",i,[(0,o.Wm)(p,{modelValue:n.search,"onUpdate:modelValue":l[0]||(l[0]=e=>n.search=e),placeholder:"请输入用户名进行查询",clearable:""},null,8,["modelValue"]),(0,o.Wm)(h,{style:{"margin-left":"5px"},type:"primary",onClick:u.findPage},{default:(0,o.w5)((()=>[(0,o.Uk)("查询")])),_:1},8,["onClick"])]),(0,o.Wm)(c,{data:n.tableData,border:"",stripe:"",style:{width:"auto"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{prop:"id",label:"id",sortable:"",width:"80"}),(0,o.Wm)(g,{prop:"username",label:"用户名"}),(0,o.Wm)(g,{prop:"password",label:"密码"}),(0,o.Wm)(g,{prop:"nickName",label:"昵称"}),(0,o.Wm)(g,{prop:"age",label:"年龄"}),(0,o.Wm)(g,{prop:"sex",label:"性别"}),(0,o.Wm)(g,{prop:"address",label:"地址"}),(0,o.Wm)(g,{prop:"role",label:"角色"}),(0,o.Wm)(g,{label:"操作"},{default:(0,o.w5)((l=>[(0,o.Wm)(h,{size:"small",onClick:e=>u.handleEdit(l.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("编辑")])),_:2},1032,["onClick"]),(0,o.Wm)(f,{width:"220","confirm-button-text":"确认","cancel-button-text":"取消",icon:e.InfoFilled,"icon-color":"#626AEF",title:"确认要删除吗？",onConfirm:e=>u.handleDelete(l.row.id)},{reference:(0,o.w5)((()=>[(0,o.Wm)(h,{size:"small",type:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:1})])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data"]),(0,o._)("div",r,[(0,o.Wm)(b,{"current-page":n.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>n.currentPage=e),"page-size":n.pageSize,"onUpdate:pageSize":l[2]||(l[2]=e=>n.pageSize=e),"page-sizes":[5,10,20],small:!0,disabled:!1,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,o.Wm)(U,{modelValue:n.dialogVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>n.dialogVisible=e),"lock-scroll":!1,"append-to-body":!0,title:"新增",width:"30%"},{footer:(0,o.w5)((()=>[(0,o._)("span",d,[(0,o.Wm)(h,{onClick:l[13]||(l[13]=e=>n.dialogVisible=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1}),(0,o.Wm)(h,{type:"primary",onClick:u.save},{default:(0,o.w5)((()=>[(0,o.Uk)("确认")])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(_,{model:n.form},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"用户名：","label-width":n.formLabelWidth},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:n.form.username,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.username=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,o.Wm)(w,{label:"密码：","label-width":n.formLabelWidth},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{type:"password",modelValue:n.form.password,"onUpdate:modelValue":l[4]||(l[4]=e=>n.form.password=e),style:{width:"80%"},"show-password":""},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,o.Wm)(w,{label:"昵称：","label-width":n.formLabelWidth},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:n.form.nickName,"onUpdate:modelValue":l[5]||(l[5]=e=>n.form.nickName=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,o.Wm)(w,{label:"年龄：","label-width":n.formLabelWidth},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:n.form.age,"onUpdate:modelValue":l[6]||(l[6]=e=>n.form.age=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,o.Wm)(w,{label:"性别：","label-width":n.formLabelWidth},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{modelValue:n.form.sex,"onUpdate:modelValue":l[10]||(l[10]=e=>n.form.sex=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:n.form.sex,"onUpdate:modelValue":l[7]||(l[7]=e=>n.form.sex=e),label:"男"},{default:(0,o.w5)((()=>[(0,o.Uk)("男")])),_:1},8,["modelValue"]),(0,o.Wm)(W,{modelValue:n.form.sex,"onUpdate:modelValue":l[8]||(l[8]=e=>n.form.sex=e),label:"女"},{default:(0,o.w5)((()=>[(0,o.Uk)("女")])),_:1},8,["modelValue"]),(0,o.Wm)(W,{modelValue:n.form.sex,"onUpdate:modelValue":l[9]||(l[9]=e=>n.form.sex=e),label:"未知"},{default:(0,o.w5)((()=>[(0,o.Uk)("未知")])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),(0,o.Wm)(w,{label:"地址：","label-width":n.formLabelWidth},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{type:"textarea",modelValue:n.form.address,"onUpdate:modelValue":l[11]||(l[11]=e=>n.form.address=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,o.Wm)(w,{label:"权限管理：","label-width":n.formLabelWidth},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{modelValue:n.userRole,"onUpdate:modelValue":l[12]||(l[12]=e=>n.userRole=e),style:{"margin-left":"20px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.roleAll,(e=>((0,o.wg)(),(0,o.j4)(k,{label:e.roleName,key:e.rid},null,8,["label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])])}a(7658);var n=a(60),u={name:"User",data(){return{form:{},formLabelWidth:120,dialogVisible:!1,currentPage:1,pageSize:10,total:0,search:"",tableData:[],roleAll:[],userRole:[]}},created(){this.findPage(),this.findRoleAll()},methods:{findPage(){n.Z.get("/user/findPage",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{console.log(e),this.tableData=e.data.records,this.total=e.data.total}))},findRoleAll(){n.Z.get("/role/findPage").then((e=>{console.log(e.data),this.roleAll=e.data.records,console.log(this.roleAll)}))},add(){this.dialogVisible=!0,this.form={}},changeRole(){console.log(this.userRole),this.form.role=this.userRole.join(","),console.log(this.form),this.form.id?n.Z.put("/userRole/updata/changeUserRole",this.form).then((e=>{"0"==e.code?this.$message.success("角色权限设置成功"):this.$message.error("角色权限设置失败")})):n.Z.post("/userRole/save/changeUserRole",this.form).then((e=>{"0"==e.code?this.$message.success("角色权限设置成功"):this.$message.error("角色权限设置失败")}))},save(){this.form.role=this.userRole.join(","),this.form.id?n.Z.put("/user/updata",this.form).then((e=>{console.log(e),"0"==e.code?(this.$message({type:"success",message:"更新成功"}),this.changeRole()):this.errorInfo(e)})):n.Z.post("/user/save",this.form).then((e=>{console.log(e),"0"==e.code?(this.$message({type:"success",message:"新增成功"}),this.changeRole()):this.$message({type:"success",message:"新增失败"})})),this.dialogVisible=!1,this.findPage();let e=JSON.parse(sessionStorage.getItem("userInfo"));this.form.id==e.id&&this.$router.push("/login")},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0,this.userRole=this.form.role.split(",")},errorInfo(e){this.$message({type:"error",message:e.msg})},handleDelete(e){console.log(e),n.Z.delete("/user/delete/"+e).then((e=>{"0"==e.code?this.$message({type:"success",message:"删除成功"}):this.errorInfo(e),this.findPage()}))},handleSizeChange(e){this.pageSize=e,this.findPage()},handleCurrentChange(e){this.currentPage=e,this.findPage()}}},h=a(89);const p=(0,h.Z)(u,[["render",m]]);var g=p}}]);
//# sourceMappingURL=373.ea294e17.js.map