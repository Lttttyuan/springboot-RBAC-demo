"use strict";(self["webpackChunkspringboot_vue_view"]=self["webpackChunkspringboot_vue_view"]||[]).push([[276],{9276:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});var t=l(3396);const i={style:{padding:"10px"}},o={style:{margin:"10px 0"}},s={style:{margin:"10px 0"}},n={style:{margin:"10px 0"}},r={class:"dialog-footer"};function m(e,a,l,m,d,p){const u=(0,t.up)("el-button"),h=(0,t.up)("el-input"),g=(0,t.up)("el-table-column"),c=(0,t.up)("el-popconfirm"),f=(0,t.up)("el-table"),w=(0,t.up)("el-pagination"),b=(0,t.up)("el-form-item"),y=(0,t.up)("el-form"),C=(0,t.up)("el-dialog"),V=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",o,[(0,t.Wm)(u,{type:"primary",onClick:p.add},{default:(0,t.w5)((()=>[(0,t.Uk)("新增")])),_:1},8,["onClick"])]),(0,t._)("div",s,[(0,t.Wm)(h,{modelValue:d.search,"onUpdate:modelValue":a[0]||(a[0]=e=>d.search=e),placeholder:"请输入关键字",style:{width:"20%"},clearable:""},null,8,["modelValue"]),(0,t.Wm)(u,{type:"primary",style:{"margin-left":"5px"},onClick:p.load},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1},8,["onClick"])]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(f,{data:d.tableData,border:"",stripe:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{prop:"pid",label:"id",sortable:"",width:"80"}),(0,t.Wm)(g,{prop:"permissionName",label:"名称"}),(0,t.Wm)(g,{prop:"permissionPath",label:"路径"}),(0,t.Wm)(g,{prop:"permissionComment",label:"备注"}),(0,t.Wm)(g,{prop:"icon",label:"图标"}),(0,t.Wm)(g,{label:"操作"},{default:(0,t.w5)((e=>[(0,t.Wm)(u,{size:"mini",onClick:a=>p.handleEdit(e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"]),(0,t.Wm)(c,{title:"确定删除吗？",onConfirm:a=>p.handleDelete(e.row.pid)},{reference:(0,t.w5)((()=>[(0,t.Wm)(u,{size:"mini",type:"danger"},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[V,d.loading]]),(0,t._)("div",n,[(0,t.Wm)(w,{onSizeChange:p.handleSizeChange,onCurrentChange:p.handleCurrentChange,"current-page":d.currentPage,"page-sizes":[5,10,20],"page-size":d.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:d.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),(0,t.Wm)(C,{title:"提示",modelValue:d.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>d.dialogVisible=e),width:"30%","lock-scroll":!1,"append-to-body":!0},{footer:(0,t.w5)((()=>[(0,t._)("span",r,[(0,t.Wm)(u,{onClick:a[5]||(a[5]=e=>d.dialogVisible=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取 消")])),_:1}),(0,t.Wm)(u,{type:"primary",onClick:p.save},{default:(0,t.w5)((()=>[(0,t.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(y,{model:d.form,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{label:"名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:d.form.permissionName,"onUpdate:modelValue":a[1]||(a[1]=e=>d.form.permissionName=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"路径"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:d.form.permissionPath,"onUpdate:modelValue":a[2]||(a[2]=e=>d.form.permissionPath=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"备注"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:d.form.permissionComment,"onUpdate:modelValue":a[3]||(a[3]=e=>d.form.permissionComment=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"图标"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:d.form.icon,"onUpdate:modelValue":a[4]||(a[4]=e=>d.form.icon=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}var d=l(60),p={name:"Permission",components:{},data(){return{loading:!0,form:{},dialogVisible:!1,search:"",currentPage:1,pageSize:10,total:0,tableData:[]}},created(){this.load()},methods:{load(){this.loading=!0,d.Z.get("/permission/findPage",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{this.loading=!1,this.tableData=e.data.records,this.total=e.data.total}))},add(){this.dialogVisible=!0,this.form={}},save(){if(this.form.pid)d.Z.put("/permission/updata",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"更新成功"}):this.$message({type:"error",message:e.msg}),this.load(),this.dialogVisible=!1}));else{let e=sessionStorage.getItem("user")||"{}",a=JSON.parse(e);this.form.author=a.nickName,d.Z.post("/permission/save",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"新增成功"}):this.$message({type:"error",message:e.msg}),this.load(),this.dialogVisible=!1}))}},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},handleDelete(e){console.log(e),d.Z.delete("/permission/delete/"+e).then((e=>{"0"===e.code?this.$message({type:"success",message:"删除成功"}):this.$message({type:"error",message:e.msg}),this.load()}))},handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.currentPage=e,this.load()}}},u=l(89);const h=(0,u.Z)(p,[["render",m]]);var g=h}}]);
//# sourceMappingURL=276.b2606edf.js.map